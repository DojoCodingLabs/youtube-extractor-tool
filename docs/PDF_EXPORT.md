# PDF Export Feature

The YouTube Extractor Tool includes a powerful PDF export feature that converts your markdown video summaries into professionally formatted PDF documents.

## Features

### üé® Professional Styling
- Clean, readable typography using system fonts
- Proper heading hierarchy with automatic styling
- Code blocks with syntax highlighting
- Optimized spacing and margins for printing
- Page numbers and headers

### ‚öôÔ∏è Customization Options
- **Page Size**: Choose between Letter (8.5" x 11") or A4 formats
- **Font Size**: Adjust base font size from 9pt to 14pt
- **Metadata Control**: Include or exclude video metadata section

### üì§ Easy Export Process
1. Open the web UI: `streamlit run web_ui.py`
2. Navigate to the "üìÑ PDF Export" tab
3. Drag and drop your markdown file or click to browse
4. Preview the content (optional)
5. Adjust export settings
6. Click "Generate PDF"
7. Download your professionally formatted PDF

## Usage

### Via Web UI (Recommended)

```bash
# Start the web UI
source venv/bin/activate
streamlit run web_ui.py
```

Then navigate to the **PDF Export** tab and upload your markdown file.

### Programmatic Usage

```python
from pathlib import Path
from yt_extractor.utils.pdf_generator import PDFGenerator

# Initialize generator
generator = PDFGenerator()

# Generate PDF
pdf_path = generator.generate_pdf(
    markdown_path=Path("outputs/category/video-summary.md"),
    output_path=Path("outputs/pdf_exports/my-summary.pdf"),
    include_metadata=True,
    page_size="letter",  # or "a4"
    font_size=11,
)

print(f"PDF generated: {pdf_path}")
```

### Test Script

A test script is included to verify PDF generation:

```bash
python test_pdf_generation.py
```

This will generate a sample PDF from an existing markdown file in your outputs directory.

## Output Location

All generated PDFs are saved to:
```
./outputs/pdf_exports/
```

## Technical Details

### Dependencies
- **WeasyPrint**: HTML/CSS to PDF rendering engine
- **markdown2**: Markdown to HTML conversion with extensions
- **PyYAML**: YAML frontmatter parsing

### Supported Markdown Features
- ‚úÖ YAML frontmatter
- ‚úÖ Headers (H1-H6)
- ‚úÖ Code blocks (fenced and inline)
- ‚úÖ Tables
- ‚úÖ Lists (ordered and unordered)
- ‚úÖ Blockquotes
- ‚úÖ Links
- ‚úÖ Bold and italic text
- ‚úÖ Task lists
- ‚úÖ Strikethrough

### PDF Structure

Generated PDFs include:

1. **Metadata Section** (optional)
   - Video title as main heading
   - Channel name, publish date, URL
   - Category and tags

2. **Content Body**
   - Executive Summary
   - Key Insights
   - Frameworks & Methods
   - Key Timestamps
   - All other markdown content

3. **Footer**
   - Page numbers
   - "Generated by YouTube Extractor Tool" attribution

## Styling Customization

The PDF styling is controlled by CSS in `yt_extractor/utils/pdf_generator.py`. You can customize:

- Font families
- Colors
- Spacing and margins
- Page breaks
- Header/footer content

To modify the styling, edit the `_get_css()` method in the `PDFGenerator` class.

## Troubleshooting

### Common Issues

**PDF generation fails with WeasyPrint error**
- Ensure all dependencies are installed: `pip install weasyprint markdown2`
- On macOS, you may need to install system dependencies for WeasyPrint

**Fonts don't look right**
- WeasyPrint uses system fonts by default
- Ensure your system has the fonts specified in the CSS

**PDF is too large**
- Consider reducing image quality in markdown
- Adjust font size to fit more content per page

**Markdown content not rendering correctly**
- Verify your markdown file has valid frontmatter
- Check that special characters are properly escaped

### System Dependencies (macOS)

WeasyPrint may require additional system libraries:

```bash
# macOS (if needed)
brew install pango
```

## Examples

### Basic Export
```python
from pathlib import Path
from yt_extractor.utils.pdf_generator import PDFGenerator

generator = PDFGenerator()
generator.generate_pdf(
    markdown_path=Path("outputs/AI/video.md"),
    output_path=Path("outputs/pdf_exports/video.pdf"),
)
```

### Custom Settings
```python
generator.generate_pdf(
    markdown_path=Path("outputs/AI/video.md"),
    output_path=Path("outputs/pdf_exports/video-a4.pdf"),
    include_metadata=False,  # Skip metadata section
    page_size="a4",          # Use A4 paper size
    font_size=12,            # Larger font
)
```

## Future Enhancements

Potential improvements for the PDF export feature:

- [ ] Custom CSS templates
- [ ] Batch PDF generation
- [ ] Table of contents generation
- [ ] Header/footer customization
- [ ] Watermark support
- [ ] PDF metadata (author, subject, keywords)
- [ ] Different styling themes
- [ ] Export to other formats (DOCX, EPUB)

## Support

For issues or feature requests related to PDF export:
1. Check this documentation
2. Review the troubleshooting section
3. Test with the included `test_pdf_generation.py` script
4. Open an issue on GitHub with error details
